before_script:
  - uname -a
  - cat /etc/issue

prepare_tools:
  stage: build
  timeout: 2h 30m
  script:
    - echo "hello world"
    - mkdir $CI_PROJECT_DIR/test -p
  tags:
    - env::native
    - host::xls01
  allow_failure: true
  artifacts:
    when: always
    paths:
    - $CI_PROJECT_DIR/test

deploy-gcc:
  stage: deploy
  script:
    - echo "This job deploys something from the $CI_COMMIT_BRANCH branch."
    - ls -al
    - mkdir $CI_PROJECT_DIR/windows
    - mkdir $CI_PROJECT_DIR/linux
    - cp /home/xl_ci/toolchain//nuclei_gnu/win32/newlibc/2021.1012-RC01-windows/nuclei_riscv_newlibc_prebuilt_win32_2021.1012-RC01-windows.zip $CI_PROJECT_DIR/windows
    - cp /home/xl_ci/toolchain/nuclei_gnu/linux64/newlibc/2021.1012-RC1-linux/nuclei_riscv_newlibc_prebuilt_linux64_2021.1012-RC1-linux.tar.bz2 $CI_PROJECT_DIR/linux
  tags:
    - env::native
    - host::xls01
  artifacts:
    name: "${CI_JOB_NAME}_${CI_COMMIT_REF_NAME}"
    paths:
    - $CI_PROJECT_DIR/windows/nuclei_riscv_newlibc_prebuilt_win32_2021.1012-RC01-windows.zip
    - $CI_PROJECT_DIR/linux/nuclei_riscv_newlibc_prebuilt_linux64_2021.1012-RC1-linux.tar.bz2